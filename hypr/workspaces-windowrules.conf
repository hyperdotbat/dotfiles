# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules
# $monitorMainLayoutOpt=layoutopt:orientation:right,new_status:master
$monitorMainLayoutOpt=layout:dwindle,layoutopt:orientation:right
$monitorSecondLayoutOpt=layout:dwindle,layoutopt:orientation:top,new_status:slave

workspace = 1, persistent:true, monitor:$monitorMain,$monitorMainLayoutOpt
workspace = 2, persistent:true, monitor:$monitorMain,$monitorMainLayoutOpt
workspace = 3, persistent:true, monitor:$monitorMain,$monitorMainLayoutOpt
workspace = 4, persistent:true, monitor:$monitorMain,$monitorMainLayoutOpt
workspace = 5, persistent:true, monitor:$monitorMain,$monitorMainLayoutOpt
workspace = 6, persistent:false, monitor:$monitorSecond,$monitorSecondLayoutOpt
workspace = 7, persistent:false, monitor:$monitorSecond,$monitorSecondLayoutOpt
workspace = 8, persistent:false, monitor:$monitorSecond,$monitorSecondLayoutOpt
workspace = 9, persistent:false, monitor:$monitorSecond,$monitorSecondLayoutOpt
workspace = 10, persistent:false, monitor:$monitorSecond,$monitorSecondLayoutOpt

# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# Ignore maximize requests from apps. You'll probably like this.
windowrule {
  name = ignore-maximize
  suppress_event = maximize
  match:class = .*
}


# Fix some dragging issues with XWayland
windowrule {
  name = xwayland-fix
  no_focus = on
  match:class = ^$
  match:title = ^$
  match:xwayland = 1
  match:float = 1
  match:fullscreen = 0
  match:pin = 0
}


# Focus browser when link opened
windowrule {
  name = browser-focus
  focus_on_activate = on
  match:class = ^($browser)$
}
windowrule {
  name = steam-focus
  focus_on_activate = on
  workspace = 4
  match:class = ^(steam)$
}
windowrule {
  name = spotify-focus
  focus_on_activate = on
  match:class = ^(Spotify)$
}
windowrule {
  name = VSC-focus
  focus_on_activate = on
  match:class = ^(VSCodium)$
}
windowrule {
  name = vsc-focus
  focus_on_activate = on
  match:class = ^(vscodium)$
}
windowrule {
  name = codium-focus
  focus_on_activate = on
  match:class = ^(codium)$
}
windowrule {
  name = code-focus
  focus_on_activate = on
  match:class = ^(code)$
}
windowrule {
  name = Code-focus
  focus_on_activate = on
  match:class = ^(Code)$
}
windowrule {
  name = VSCode-focus
  focus_on_activate = on
  match:class = ^(VSCode)$
}
windowrule {
  name = notion-focus
  focus_on_activate = on
  match:class = ^(Notion)$
}


# Clipse
windowrule {
  name = clipse-float
  float = on
  match:class = (clipse)
}
windowrule {
  name = clipse-size
  size = 652 652
  match:class = (clipse)
}


# Fix Chromium PWAs and other apps floating
# windowrulev2 = tile, xwayland:1
windowrule {
  name = chromium-float-fix
  tile = on
  match:class = ^(Chromium)$
}
windowrule {
  name = aseprite-float-fix
  tile = on
  match:class = ^(Aseprite)$
}
windowrule {
  name = outlook-float-fix
  tile = on
  match:initial_title = ^(Outlook \(PWA\))$
}
windowrule {
  name = godot-float-fix
  tile = on
  match:class = ^(Godot)$
}


# Make PiP float and pin
windowrule {
  name = pip
  float = on
  pin = on
  match:title = ^(Picture in picture)$
}
windowrule {
  name = pip_1
  float = on
  pin = on
  match:title = ^(Picture-in-Picture)$
}


# Actually force floating on some apps
windowrule {
  name = bevy-float
  float = on
  match:title = ^(Bevy App)$
}


# Specific workspace for apps
windowrule {
  name = steam-workspace4
  workspace = 4
  match:class = ^(steam_app_.*)$
}
windowrule {
  name = prismlauncher-workspace4
  workspace = 4
  match:class = ^(com.prismlauncher.PrismLauncher)$
}
windowrule {
  name = prismlauncher-workspace4_1
  workspace = 4
  match:class = ^(*prismlauncher*)$
}
windowrule {
  name = minecraft-workspace4
  workspace = 4
  match:class = ^(Minecraft*)$
}
windowrule {
  name = teams-workspace5
  workspace = 5
  match:class = ^(teams-for-linux)$
}

windowrule {
  name = discord-workspace_dc
  workspace = special:dc silent
  match:class = ^(discord)$
}
windowrule {
  name = toggl-workspace_spc
  workspace = special:spc
  match:initial_title = ^(Toggl Track)$
}
windowrule {
  name = spotify-workspace_spc
  workspace = special:spc
  match:class = ^(spotify)$
}
windowrule {
  name = ytmusic-workspace_spc
  workspace = special:spc
  match:class = ^(com.github.th_ch.youtube_music)$
}
windowrule {
  name = feishin-workspace_spc
  workspace = special:spc
  match:class = ^(feishin)$
}
windowrule {
  name = chatgpt-workspace_gpt
  workspace = special:gpt
  match:initial_title = ^(ChatGPT)$
}


# NoScreenShare for apps requiring privacy
windowrule {
  name = bitwarden-noscreenshare
  no_screen_share = on
  match:class = Bitwarden
}
windowrule {
  name = bitwarden-noscreenshare_1
  no_screen_share = on
  match:title = (?i)(.*Bitwarden.*)
}
windowrule {
  name = mbank-noscreenshare
  no_screen_share = on
  match:title = (?i)(.*mBank.*)
}
windowrule {
  name = obs-noscreenshare
  no_screen_share = on
  match:class = com.obsproject.Studio
}
# windowrule {
#   name = discord-noscreenshare
#   no_screen_share = on
#   match:class = discord
# }


# No blur on popups etc
windowrule {
  name = noblur-popups
  no_blur = on
  match:class = ^()$
  match:title = ^()$
}


# Fix popups like JetBrains IDE losing focus and glitching out (not fully working)
windowrule {
  name = jetbrains-focus
  stay_focused = on
  match:class = ^(jetbrains-rider)
  match:title = (^$)
}
windowrule {
  name = jetbrains-focus_1
  stay_focused = on
  match:class = ^(jetbrains.*)
  match:title = (^$)
}

# -- Fix odd behaviors in IntelliJ IDEs --
#! Fix splash screen showing in weird places and prevent annoying focus takeovers
windowrule {
  name = jetbrains-fix
  center = on
  no_focus = on
  border_size = 0
  match:class = ^(jetbrains-.*)$
  match:title = ^(splash)$
  match:float = 1
}
#! Center popups/find windows
windowrule {
  name = jetbrains-fix_1
  center = on
  stay_focused = on
  border_size = 0
  match:class = ^(jetbrains-.*)$
  match:title = ^( )$
  match:float = 1
}
#! Disable window flicker when autocomplete or tooltips appear
windowrule {
  name = jetbrains-fix_2
  no_focus = on
  match:class = ^(jetbrains-.*)$
  match:title = ^(win.*)$
  match:float = 1
}


# Notion doesnt work yet
windowrule {
  name = notion-fix
  center = on
  stay_focused = on
  border_size = 0
  match:class = ^(Notion)$
  match:title = ^( )$
  match:float = 1
}
windowrule {
  name = notion-fix_1
  no_focus = on
  match:class = ^(Notion)$
  match:title = ^(win.*)$
  match:float = 1
}


# Fix GIMP dialogues
windowrule {
  name = gimp-fix
  float = on
  match:class = gimp
}
windowrule {
  name = gimp-fix_1
  tile = on
  match:class = gimp
  match:initial_title = ^(GNU Image Manipulation Program)
}


# Stop Discord autofocusing on startup
# windowrulev2 = nofocus,class:^(discord)$

# attempt at fixing Steam's notification showing on wrong screen
# (always the most bottom right corner, on a second monitor)
# windowrulev2 = move 0 0,class:^(steamwebhelper)$
# windowrulev2 = monitor 0,class:^(steamwebhelper)$
# windowrulev2 = monitor $monitorMain,class:^(steamwebhelper)$